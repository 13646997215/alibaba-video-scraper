<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>阿里巴巴商品视频爬虫工具</title>
    <link
      rel="icon"
      href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><rect width="64" height="64" rx="12" fill="%23EABCDD"/><text x="50%25" y="56%25" dominant-baseline="middle" text-anchor="middle" font-size="34">🎬</text></svg>'
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app-shell">
      <div class="bg-orb bg-orb-1"></div>
      <div class="bg-orb bg-orb-2"></div>

      <main class="container">
        <header class="hero-card">
          <div class="hero-badge">在线免费工具</div>
          <h1>🎬 阿里巴巴商品视频爬虫</h1>
          <p>粘贴商品链接，一键解析并打包下载全部视频</p>
          <div class="tag-row">
            <span class="tag">无需安装</span>
            <span class="tag">智能解析</span>
            <span class="tag">Vercel 全球访问</span>
          </div>
        </header>

        <section class="card input-card">
          <label class="field-label" for="urlInput">商品页面 URL</label>
          <div class="input-wrapper">
            <input
              type="text"
              id="urlInput"
              placeholder="https://www.alibaba.com/product-detail/..."
              class="url-input"
            />
            <button id="scrapeBtn" class="btn btn-primary">开始爬取</button>
          </div>
          <div class="quick-actions">
            <button id="clearUrlBtn" class="btn btn-soft" type="button">清空链接</button>
            <button id="pasteUrlBtn" class="btn btn-soft" type="button">粘贴链接</button>
            <button id="sampleUrlBtn" class="btn btn-soft" type="button">示例链接</button>
          </div>
          <p class="helper-text">
            支持阿里巴巴商品详情页，建议直接粘贴完整链接。
            <span id="runtimeHint"></span>
          </p>
          <div id="recentUrls" class="recent-urls" hidden></div>
        </section>

        <section class="card status-section" id="statusSection" hidden>
          <div class="status-header">
            <span class="status-icon" id="statusIcon">⏳</span>
            <div>
              <div class="status-text" id="statusText">正在处理...</div>
              <div class="status-message" id="statusMessage">
                正在获取页面...
              </div>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
        </section>

        <section class="card videos-section" id="videosSection" hidden>
          <div class="videos-header">
            <h2>解析结果</h2>
            <span class="count-pill" id="videoCountPill">0 个视频</span>
          </div>
          <div class="result-tools">
            <input id="filterInput" class="filter-input" type="text" placeholder="筛选视频链接关键字..." />
            <div class="tool-buttons">
              <button id="selectAllBtn" class="btn btn-soft" type="button">全选</button>
              <button id="invertSelectBtn" class="btn btn-soft" type="button">反选</button>
              <button id="copyAllBtn" class="btn btn-soft" type="button">复制全部</button>
              <button id="exportJsonBtn" class="btn btn-soft" type="button">导出JSON</button>
              <button id="downloadSelectedBtn" class="btn btn-soft" type="button">打包所选</button>
            </div>
          </div>
          <div class="result-stats" id="resultStats"></div>
          <div class="videos-list" id="videosList"></div>
        </section>
      </main>

      <button id="downloadAllBtn" class="fab" title="打包下载全部视频" hidden>
        📦 打包下载全部
      </button>

      <div id="previewModal" class="preview-modal" hidden>
        <div class="preview-panel">
          <div class="preview-header">
            <strong>视频预览</strong>
            <button id="closePreviewBtn" class="btn btn-soft" type="button">关闭</button>
          </div>
          <video id="previewPlayer" controls class="preview-player"></video>
          <div id="previewUrl" class="preview-url"></div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
